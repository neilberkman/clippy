version: 2

project_name: clippy

before:
  hooks:
    - go mod tidy

builds:
  - id: clippy
    main: ./cmd/clippy
    binary: clippy
    env:
      - CGO_ENABLED=1
    goos:
      - darwin
    goarch:
      - amd64
      - arm64
    ldflags:
      - -s -w -X github.com/neilberkman/clippy/cmd/internal/common.Version={{.Version}} -X github.com/neilberkman/clippy/cmd/internal/common.Commit={{.Commit}} -X github.com/neilberkman/clippy/cmd/internal/common.Date={{.Date}}
  - id: pasty
    main: ./cmd/pasty
    binary: pasty
    env:
      - CGO_ENABLED=1
    goos:
      - darwin
    goarch:
      - amd64
      - arm64
    ldflags:
      - -s -w -X github.com/neilberkman/clippy/cmd/internal/common.Version={{.Version}} -X github.com/neilberkman/clippy/cmd/internal/common.Commit={{.Commit}} -X github.com/neilberkman/clippy/cmd/internal/common.Date={{.Date}}

archives:
  - name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    files:
      - README.md

checksum:
  name_template: 'checksums.txt'

snapshot:
  version_template: "{{ incpatch .Version }}-next"

changelog:
  sort: asc
  filters:
    exclude:
      - '^docs:'
      - '^test:'
      - '^chore:'

release:
  github:
    owner: "{{ .Env.GITHUB_REPOSITORY_OWNER }}"
    name: clippy
  draft: false
  prerelease: auto
  make_latest: true
  mode: replace
  header: |
    ## Clippy {{.Tag}}

    Smart clipboard tool for macOS that bridges terminal and GUI workflows.

    **Install:** `brew install clippy`

  footer: |
    ---

    **Full Changelog**: https://github.com/{{ .Env.GITHUB_REPOSITORY_OWNER }}/clippy/compare/{{.PreviousTag}}...{{.Tag}}

    **Installation:**
    ```bash
    # Homebrew (recommended)
    brew install clippy

    # Direct download - Apple Silicon
    curl -L https://github.com/neilberkman/clippy/releases/download/{{.Tag}}/clippy_{{.Version}}_darwin_arm64.tar.gz | tar xz

    # Direct download - Intel
    curl -L https://github.com/neilberkman/clippy/releases/download/{{.Tag}}/clippy_{{.Version}}_darwin_amd64.tar.gz | tar xz
    ```

    üêõ **Found a bug?** [Open an issue](https://github.com/{{ .Env.GITHUB_REPOSITORY_OWNER }}/clippy/issues/new)

# brews section removed - clippy is now in Homebrew Core
# The tap (neilberkman/clippy) is kept only for Draggy cask
# Users should install clippy with: brew install clippy
